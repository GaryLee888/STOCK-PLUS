name: 24H_Trading_Radar

on:
  schedule:
    - cron: '50 0 * * 1-5' # 台灣時間 08:50 (週一至週五)
  workflow_dispatch: # 允許手動從網頁按啟動

jobs:
  run_monitor:
    runs-on: ubuntu-latest
    steps:
      - name: 複製代碼
        uses: actions/checkout@v3

      - name: 設定 Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.9'

      - name: 安裝套件
        run: |
          pip install shioaji pandas pillow requests openpyxl

      - name: 執行監控
        env:
          API_KEY: ${{ secrets.API_KEY }}
          SECRET_KEY: ${{ secrets.SECRET_KEY }}
        run: python worker.py
